#! /bin/sh
#
# weather.sh
# Show a 3-day forcast (updates hourly)
# for more information `curl wttr.in/:help`
#
# Copyleft (ↄ) 2016 jkirchartz <me@jkirchartz.com>
#
# Distributed under terms of the NPL (Necessary Public License) license.
#

HEIGHT=$(tput lines)
# WIDTH=$(tput columns)
Q=""
LOC="PIT"


((HEIGHT>=5 && HEIGHT<=15)) && Q="0"
((HEIGHT>=15 && HEIGHT<=25)) && Q="1"
((HEIGHT>=25 && HEIGHT<=35)) && Q="2"

while true
do
  printf "\ec" # clear screen
	# get weather for pittsburgh (via IATA airport code), remove cruft
  curl -s "wttr.in/$LOC?$Q" 2>/dev/null | head -n 17
  sleep 3600 # one hour
done


# Weather report: Pittsburgh, United States of America
#
#                Overcast
#       .--.     41 °F
#    .-(    ).   → 0 mph
#   (___.__)__)  9 mi
#                0.0 in
#                                                        ┌─────────────┐
# ┌──────────────────────────────┬───────────────────────┤  Tue 10 Apr ├───────────────────────┬──────────────────────────────┐
# │            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │
# ├──────────────────────────────┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤
# │    \  /       Partly cloudy  │               Cloudy         │    \  /       Partly cloudy  │    \  /       Partly cloudy  │
# │  _ /"".-.     28-30 °F       │      .--.     37 °F          │  _ /"".-.     41-42 °F       │  _ /"".-.     39-41 °F       │
# │    \_(   ).   → 1 mph        │   .-(    ).   → 2-3 mph      │    \_(   ).   → 5-6 mph      │    \_(   ).   → 3-7 mph      │
# │    /(___(__)  11 mi          │  (___.__)__)  11 mi          │    /(___(__)  11 mi          │    /(___(__)  11 mi          │
# │               0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │
# └──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────────────┘
#                                                        ┌─────────────┐
# ┌──────────────────────────────┬───────────────────────┤  Wed 11 Apr ├───────────────────────┬──────────────────────────────┐
# │            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │
# ├──────────────────────────────┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤
# │    \  /       Partly cloudy  │               Overcast       │               Cloudy         │    \  /       Partly cloudy  │
# │  _ /"".-.     26-32 °F       │      .--.     41-42 °F       │      .--.     41-42 °F       │  _ /"".-.     35 °F          │
# │    \_(   ).   ↗ 4-8 mph      │   .-(    ).   ↗ 8-12 mph     │   .-(    ).   ↗ 9-16 mph     │    \_(   ).   ↗ 7-16 mph     │
# │    /(___(__)  12 mi          │  (___.__)__)  12 mi          │  (___.__)__)  10 mi          │    /(___(__)  9 mi           │
# │               0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │               0.0 in | 0%    │
# └──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────────────┘
#                                                        ┌─────────────┐
# ┌──────────────────────────────┬───────────────────────┤  Thu 12 Apr ├───────────────────────┬──────────────────────────────┐
# │            Morning           │             Noon      └──────┬──────┘     Evening           │             Night            │
# ├──────────────────────────────┼──────────────────────────────┼──────────────────────────────┼──────────────────────────────┤
# │  _`/"".-.     Patchy rain po…│    \  /       Partly cloudy  │    \  /       Partly cloudy  │    \  /       Partly cloudy  │
# │   ,\_(   ).   41-42 °F       │  _ /"".-.     57 °F          │  _ /"".-.     66-68 °F       │  _ /"".-.     62 °F          │
# │    /(___(__)  ↑ 10-17 mph    │    \_(   ).   ↗ 18-21 mph    │    \_(   ).   ↗ 13-22 mph    │    \_(   ).   ↗ 9-20 mph     │
# │      ‘ ‘ ‘ ‘  9 mi           │    /(___(__)  11 mi          │    /(___(__)  11 mi          │    /(___(__)  11 mi          │
# │     ‘ ‘ ‘ ‘   0.0 in | 76%   │               0.0 in | 43%   │               0.0 in | 0%    │               0.0 in | 0%    │
# └──────────────────────────────┴──────────────────────────────┴──────────────────────────────┴──────────────────────────────┘
#
